<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="../../../BBDD/WebCorporativaDades.js"></script>
    <script src="usuaris.js"></script>
    <link rel="stylesheet" href="../../css/usuaris.css">
    <title>Gesti贸 d'Usuaris</title>
</head>
<body>
    <!-- Barra de navegaci贸 -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <h2>Administraci贸</h2>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="../dashboard/dashboard.html" class="nav-link">
                        <span class="nav-icon"></span>
                        Dashboard
                    </a>
                </li>
                <li class="nav-item">
                    <a href="../noticies/noticies.html" class="nav-link">
                        <span class="nav-icon"></span>
                        Gesti贸 noticies
                    </a>
                </li>
                <li class="nav-item">
                    <a href="../usuaris/usuaris.html" class="nav-link active">
                        <span class="nav-icon"></span>
                        Gesti贸 usuaris
                    </a>
                </li>
                <li class="nav-item">
                    <a href="../../categories/categories.html" class="nav-link">
                        <span class="nav-icon"></span>
                        Gesti贸 categories
                    </a>
                </li>
            </ul>
            <div class="nav-actions">
                <div class="user-info">
                    <span class="user-icon"></span>
                    <span class="user-name" id="currentUserName">Usuari</span>
                </div>
                <button class="btn-logout" onclick="tancarSessio()">
                    <span class="nav-icon"></span>
                    Tancar Sessi贸
                </button>
            </div>
        </div>
    </nav>
    
    <!-- Contingut principal -->
    <div class="main-content">
        <h1>Gesti贸 d'Usuaris</h1>
    
    <!-- Formulari per afegir/editar usuaris -->
    <div class="formulari-usuari">
        <h2 id="titolFormulari">Afegir Nou Usuari</h2>
        <form id="formulariUsuari" novalidate>
            <input type="hidden" id="indexUsuari" value="-1">
            
            <div class="camp-formulari">
                <label for="nomUsuari">Nom complet:</label>
                <input 
                    type="text" 
                    id="nomUsuari" 
                    placeholder="Ex: Joan Garcia" 
                    required 
                    minlength="2"
                    maxlength="100"
                    pattern="[A-Za-z-每\s]{2,100}"
                    title="El nom ha de tenir entre 2 i 100 lletres (poden incloure espais)">
                <span class="error-message" id="nomUsuariError"></span>
            </div>
            
            <div class="camp-formulari">
                <label for="emailUsuari">Correu electr貌nic:</label>
                <input 
                    type="email" 
                    id="emailUsuari" 
                    placeholder="Ex: joan.garcia@example.com" 
                    required
                    pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
                    title="Introdueix un correu electr貌nic vlid">
                <span class="error-message" id="emailUsuariError"></span>
            </div>
            
            <div class="camp-formulari">
                <label for="passwordUsuari">Contrasenya:</label>
                <input 
                    type="password" 
                    id="passwordUsuari" 
                    placeholder="Entre 8 i 20 carcters" 
                    minlength="8" 
                    maxlength="20" 
                    required 
                    pattern=".{8,20}"
                    title="La contrasenya ha de tenir entre 8 i 20 carcters">
                <span class="error-message" id="passwordUsuariError"></span>
            </div>
            
            <div class="camp-formulari">
                <label for="rolUsuari">Rol del Usuari:</label>
                <select id="rolUsuari" required>
                    <option value="">Trieu un rol</option>
                    <option value="editor">Editor</option>
                    <option value="admin">Administrador</option>
                </select>
                <span class="error-message" id="rolUsuariError"></span>
            </div>
            
            <div class="botons-formulari">
                <button type="submit" id="btnAfegir">Afegir Usuari</button>
                <button type="button" id="btnActualitzar" style="display: none;">Actualitzar Usuari</button>
                <button type="button" id="btnCancelar" class="ocult">Cancel路lar</button>
            </div>
        </form>
        
        <div id="missatgeError" class="missatge-error"></div>
        <div id="missatgeExit" class="missatge-exit"></div>
    </div>
    
    <!-- Contador d'usuaris -->
    <div class="contador-usuaris">
        Total d'usuaris: <span id="totalUsuaris">0</span>
        <span id="infoPaginacio" class="info-paginacio-header"></span>
    </div>
    
    <!-- Taula d'usuaris -->
    <div class="taula-container">
        <table id="taulaUsuaris">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nom</th>
                    <th>Correu electr貌nic</th>
                    <th>Rol usuari</th>
                    <th>Accions</th>
                </tr>
            </thead>
            <tbody id="llistaUsuaris">
                <!-- Els usuaris es mostraran aqu铆 -->
            </tbody>
        </table>
        <div id="senseUsuaris" class="sense-usuaris" style="display: none;">
            No hi ha usuaris registrats. Afegeix el primer usuari utilitzant el formulari superior.
        </div>
        
        <!-- Controls de paginaci贸 -->
        <div id="paginacio" class="paginacio" style="display: none;">
            <!-- Els controls de paginaci贸 es generaran aqu铆 dinmicament -->
        </div>
    </div>
    
    </div> <!-- Tanca main-content -->
</body>
</html>